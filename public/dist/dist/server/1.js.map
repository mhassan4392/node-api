{"version":3,"file":"1.js","sources":["webpack:///./utils/createFormData.js","webpack:///./mixins/crud.js","webpack:///./components/crud/CrudSnackbar.vue?19eb","webpack:///CrudSnackbar.vue","webpack:///./components/crud/CrudSnackbar.vue?4ee4","webpack:///./components/crud/CrudSnackbar.vue","webpack:///./components/crud/CrudEdit.vue?1064","webpack:///CrudEdit.vue","webpack:///./components/crud/CrudEdit.vue?40f7","webpack:///./components/crud/CrudEdit.vue"],"sourcesContent":["function objectToFormData(obj, rootName, ignoreList) {\n  const formData = new FormData()\n\n  function appendFormData(data, root) {\n    if (!ignore(root)) {\n      root = root || ''\n      if (data instanceof File) {\n        formData.append(root, data)\n      } else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n          formData.append(root, data[i])\n          // appendFormData(data[i], root + '[' + i + ']')\n        }\n      } else if (typeof data === 'object' && data) {\n        for (const key in data) {\n          // eslint-disable-next-line no-prototype-builtins\n          if (data.hasOwnProperty(key)) {\n            if (root === '') {\n              appendFormData(data[key], key)\n            } else {\n              appendFormData(data[key], root + '.' + key)\n            }\n          }\n        }\n      } else if (data !== null && typeof data !== 'undefined') {\n        formData.append(root, data)\n      }\n    }\n  }\n\n  function ignore(root) {\n    return (\n      Array.isArray(ignoreList) &&\n      ignoreList.some(function(x) {\n        return x === root\n      })\n    )\n  }\n\n  appendFormData(obj, rootName)\n\n  return formData\n}\n\nexport default objectToFormData\n","import objectToFormData from '~/utils/createFormData'\n\nexport default {\n  data() {\n    return {\n      loading: {\n        data: false,\n        add: false,\n        edit: false,\n        delete: false\n      },\n      alert: {\n        show: false,\n        type: 'success',\n        text: '',\n        timeout: 5000\n      }\n    }\n  },\n  methods: {\n    // crud actions\n\n    // fetch item action\n    async fetchItem() {\n      // replace the url param with actual param\n      const fetchUrl = this.fetchData.url\n      const url = fetchUrl.replace(':param', this.fetchData.param)\n\n      try {\n        // set loading to true\n        this.loading.data = true\n\n        // send request to api\n        const response = await this.$axios.get(url)\n\n        // set loading to false\n        this.loading.data = false\n\n        // set item\n        this.item = response.data[this.fetchData.data]\n      } catch (e) {\n        // set loading to false\n        this.loading.data = false\n      }\n    },\n\n    // fetch items action\n    async fetchItems(firstEmpty = false) {\n      try {\n        // set items to empty begore fetch\n        if (firstEmpty) {\n          this.data = []\n        }\n\n        // set loading to true\n        this.loading.data = true\n\n        // send request to api\n        const response = await this.$axios.get(this.fetchData.url)\n\n        // set loading to false\n        this.loading.data = false\n\n        // set data to respose\n        this.data = response.data[this.fetchData.data]\n      } catch (e) {\n        // set loading to false\n        this.loading.data = false\n      }\n    },\n\n    // add item action\n    async addItem(data, form, itemForm) {\n      try {\n        // remove any alerts if exist\n        this.removeAlert()\n\n        // set loading to true\n        this.loading.add = true\n\n        // convert data to formdata\n        if (this.addData.formData) {\n          data = objectToFormData(data)\n        }\n\n        // send api request\n        const response = await this.$axios.post(this.addData.url, data)\n\n        // set loading to false\n        this.loading.add = false\n\n        // reset form validation\n        form.resetValidation()\n\n        // reset form\n        // this.item = Object.assign({}, this.defaultItem)\n\n        // close dialog\n        this.showAddEditDialog = false\n\n        // display success message\n        this.addAlert(\n          true,\n          'success',\n          response.data.message ? response.data.message : response.message\n        )\n\n        // emit after add function\n        this.$emit('after-add', response, this.item)\n\n        // reload\n        if (this.addData.reload) {\n          if (response) {\n            await this.fetchItems()\n          }\n        }\n\n        // success redirect\n        if (this.addData.successRedirect) {\n          this.$router.push(this.addData.successRedirect)\n        }\n      } catch (e) {\n        // set loading to false\n        this.loading.add = false\n\n        // display error message\n        this.addAlert(\n          true,\n          'error',\n          e.response.data.message ? e.response.data.message : e.response.message\n        )\n      }\n\n      // error redirect\n      if (this.addData.errorRedirect) {\n        this.$router.push(this.addData.errorRedirect)\n      }\n    },\n\n    // edit item aciotn\n    async editItem(data, form) {\n      // replace the url param with actual param\n      const editUrl = this.editData.url\n      let url = editUrl\n      if (this.editData.param) {\n        url = editUrl.replace(':param', this.item[this.editData.param])\n      }\n\n      try {\n        // remove any alerts if exist\n        this.removeAlert()\n\n        // set loading to true\n        this.loading.edit = true\n\n        // convert data to formdata\n        if (this.editData.formData) {\n          data = objectToFormData(data)\n        }\n\n        // send request to api\n        const response = await this.$axios.put(url, data)\n\n        // set loading to false\n        this.loading.edit = false\n\n        // reset form validation\n        form.resetValidation()\n\n        // reset form\n        // this.item = Object.assign({}, this.defaultItem)\n\n        // close dialog\n        this.showAddEditDialog = false\n\n        // display success message\n        this.addAlert(\n          true,\n          'success',\n          response.data.message ? response.data.message : response.message\n        )\n        // reload\n        if (this.editData.reload) {\n          if (response) {\n            await this.fetchItems()\n          }\n        }\n\n        // emit after edit function\n        this.$emit('after-edit', response, this.item)\n\n        // success redirect\n        if (this.editData.successRedirect) {\n          this.$router.push(this.editData.successRedirect)\n        }\n      } catch (e) {\n        // set loading to false\n        this.loading.edit = false\n\n        // display error message\n        this.addAlert(\n          true,\n          'error',\n          e.response.data.message ? e.response.data.message : e.response.message\n        )\n\n        // error redirect\n        if (this.editData.errorRedirect) {\n          this.$router.push(this.editData.errorRedirect)\n        }\n      }\n    },\n\n    // delete Item\n    async deleteItem() {\n      // replace the url param with actual param\n      const deleteUrl = this.deleteData.url\n      const url = deleteUrl.replace(\n        ':param',\n        this.itemToDel[this.deleteData.param]\n      )\n      try {\n        // remove any alerts if exist\n        this.removeAlert()\n\n        // set loadign to true\n        this.loading.delete = true\n\n        // send request to api\n        const response = await this.$axios.delete(url)\n\n        // set loading to false\n        this.loading.delete = false\n\n        // display success message\n        this.addAlert(\n          true,\n          'success',\n          response.data.message ? response.data.message : response.message\n        )\n\n        // close confirm dialog\n        this.showDeleteDialog = false\n\n        // emit after delete function\n        this.$emit('after-delete', response, this.item)\n\n        // reload\n        if (this.deleteData.reload) {\n          if (response) {\n            await this.fetchItems()\n          }\n        }\n      } catch (e) {\n        // set loading to false\n        this.loading.delete = false\n\n        // display error message\n        this.addAlert(\n          true,\n          'error',\n          e.response.data.message ? e.response.data.message : e.response.message\n        )\n      }\n    },\n\n    // delete multiple items\n    async deleteItems(data) {\n      try {\n        // remove any alerts if exist\n        this.removeAlert()\n\n        // set loading to true\n        this.loading.delete = true\n\n        // if arrayOf given\n        if (this.deleteMultipleData.arrayOf) {\n          data = data.map((d) => d[this.deleteMultipleData.arrayOf])\n        }\n\n        // send request to api\n        const response = await this.$axios.post(\n          this.deleteMultipleData.url,\n          data\n        )\n        // set loading to false\n        this.loading.delete = false\n        // display success message\n        this.addAlert(\n          true,\n          'success',\n          response.data.message ? response.data.message : response.message\n        )\n        // close confirm dialog\n        this.showDeleteDialog = false\n\n        // emit after delete multiple function\n        this.$emit('after-delete-multiple', response, this.item)\n\n        // reload\n        if (this.deleteMultipleData.reload) {\n          if (response) {\n            await this.fetchItems()\n          }\n        }\n\n        // change bulk delete value to default\n        this.bulkDeleteValue = ''\n      } catch (e) {\n        // set laodign to false\n        this.loading.delete = false\n        // display error message\n        this.addAlert(\n          true,\n          'error',\n          e.response.data.message ? e.response.data.message : e.response.message\n        )\n      }\n    },\n\n    // add alert\n    addAlert(show = true, type = 'info', text = '', timeout = 5000) {\n      this.alert = {\n        show,\n        type,\n        text,\n        timeout\n      }\n    },\n\n    // remove alert\n    removeAlert(show = false, type = 'info', text = '', timeout = 5000) {\n      this.alert = {\n        show,\n        type,\n        text,\n        timeout\n      }\n    }\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-snackbar',{attrs:{\"color\":_vm.alert.type,\"timeout\":_vm.alert.timeout},scopedSlots:_vm._u([{key:\"action\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._b({attrs:{\"icon\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.alert.show = false}}},'v-btn',attrs,false),[_c('v-icon',[_vm._v(\"mdi-close\")])],1)]}}]),model:{value:(_vm.alert.show),callback:function ($$v) {_vm.$set(_vm.alert, \"show\", $$v)},expression:\"alert.show\"}},[_c('div',[_vm._v(_vm._s(_vm.$t(_vm.alert.text)))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-snackbar v-model=\"alert.show\" :color=\"alert.type\" :timeout=\"alert.timeout\">\n    <div>{{ $t(alert.text) }}</div>\n    <template v-slot:action=\"{ attrs }\">\n      <v-btn icon v-bind=\"attrs\" text @click=\"alert.show = false\">\n        <v-icon>mdi-close</v-icon>\n      </v-btn>\n    </template>\n  </v-snackbar>\n</template>\n\n<script>\nexport default {\n  props: {\n    alert: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    }\n  }\n}\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrudSnackbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrudSnackbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CrudSnackbar.vue?vue&type=template&id=597197aa&\"\nimport script from \"./CrudSnackbar.vue?vue&type=script&lang=js&\"\nexport * from \"./CrudSnackbar.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"3a80c569\"\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSnackbar } from 'vuetify/lib/components/VSnackbar';\ninstallComponents(component, {VBtn,VIcon,VSnackbar})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.loading.data)?_c('v-skeleton-loader',{attrs:{\"type\":\"card-avatar, article, card-actions, card-avatar, article, card-actions\",\"loading\":\"\"}}):_c('v-card',[(_vm.heading)?_c('v-card-title',[_vm._v(\"\\n      \"+_vm._s(_vm.heading)+\"\\n      \"),_c('v-spacer')],1):_vm._e(),_vm._v(\" \"),_c('v-card-text',[_c('v-form',{ref:\"form\",attrs:{\"id\":\"itemForm\",\"enctype\":\"multipart/form-data\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_vm._t(\"crud-form\",null,{\"item\":_vm.item})],2)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),(_vm.goBackButton)?_c('v-btn',{attrs:{\"color\":_vm.goBackButton.color ? _vm.goBackButton.color : 'error'},on:{\"click\":_vm.goBack}},[_vm._v(\"\\n        \"+_vm._s(_vm.goBackButton.text\n            ? _vm.goBackButton.text\n            : _vm.$t('crudEdit.goBackButton.text'))+\"\\n      \")]):_vm._e(),_vm._v(\" \"),(_vm.button)?_c('v-btn',{attrs:{\"loading\":_vm.loading.edit,\"color\":_vm.button.color ? _vm.button.color : 'success'},on:{\"click\":_vm.saveForm}},[_vm._v(\"\\n        \"+_vm._s(_vm.button.text ? _vm.button.text : _vm.$t('crudEdit.editButton.text'))+\"\\n      \")]):_vm._e()],1)],1),_vm._ssrNode(\" \"),_c('crud-snackbar',{attrs:{\"alert\":_vm.alert}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-skeleton-loader\n      v-if=\"loading.data\"\n      type=\"card-avatar, article, card-actions, card-avatar, article, card-actions\"\n      loading\n    >\n    </v-skeleton-loader>\n    <v-card v-else>\n      <v-card-title v-if=\"heading\">\n        {{ heading }}\n        <v-spacer></v-spacer>\n      </v-card-title>\n      <v-card-text>\n        <v-form\n          id=\"itemForm\"\n          ref=\"form\"\n          v-model=\"valid\"\n          enctype=\"multipart/form-data\"\n        >\n          <slot name=\"crud-form\" :item=\"item\"></slot>\n        </v-form>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn\n          v-if=\"goBackButton\"\n          :color=\"goBackButton.color ? goBackButton.color : 'error'\"\n          @click=\"goBack\"\n        >\n          {{\n            goBackButton.text\n              ? goBackButton.text\n              : $t('crudEdit.goBackButton.text')\n          }}\n        </v-btn>\n        <v-btn\n          v-if=\"button\"\n          :loading=\"loading.edit\"\n          :color=\"button.color ? button.color : 'success'\"\n          @click=\"saveForm\"\n        >\n          {{ button.text ? button.text : $t('crudEdit.editButton.text') }}\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n\n    <!-- Alert Snacbar -->\n    <crud-snackbar :alert=\"alert\" />\n  </div>\n</template>\n\n<script>\nimport crud from '@/mixins/crud'\nimport CrudSnackbar from '@/components/crud/CrudSnackbar'\nexport default {\n  components: { CrudSnackbar },\n  mixins: [crud],\n  props: {\n    heading: { type: String, default: '' },\n    defaultItem: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    button: { type: [Boolean, Object], default: false },\n    goBackButton: { type: [Boolean, Object], default: false },\n    fetchData: { type: [Boolean, Object], default: false },\n    editData: { type: [Boolean, Object], default: false }\n  },\n  data() {\n    return {\n      valid: false,\n      item: Object.assign({}, this.defaultItem)\n    }\n  },\n  // fetch items if fetch data\n  async created() {\n    if (this.fetchData) {\n      await this.fetchItem()\n    }\n  },\n  methods: {\n    // save form\n    saveForm() {\n      this.$refs.form.validate()\n      if (this.valid) {\n        this.itemEdit(this.$refs.form)\n      }\n    },\n\n    goBack() {\n      if (this.goBackButton.redirect) {\n        this.$router.push({ path: this.goBackButton.url })\n      } else {\n        this.$router.go(-1)\n      }\n    },\n\n    // item edit\n    async itemEdit(form) {\n      if (!this.editData) {\n        this.$emit('editItem', this.item, form)\n      } else {\n        await this.editItem(this.item, form, false)\n      }\n    }\n  }\n}\n</script>\n\n<style scope></style>\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrudEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CrudEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CrudEdit.vue?vue&type=template&id=32edaa5c&\"\nimport script from \"./CrudEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./CrudEdit.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  null,\n  \"b22b7424\"\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VSkeletonLoader } from 'vuetify/lib/components/VSkeletonLoader';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VForm,VSkeletonLoader,VSpacer})\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;AC5CA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AAJA;AAPA;AAcA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAMA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAMA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAKA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAhUA;AAjBA;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACQA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AADA;AADA;;ACZA;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiDA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAXA;AACA;AAYA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AA5BA;;ACvDA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;A","sourceRoot":""}